<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Beerlington &middot; The Blog
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24856035-1', 'gitub.com');
  ga('send', 'pageview');

</script>

</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>Beerlington</h1>
      <p class="lead">The Blog</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item active">
        <a href="/">Home</a>
      </li>

      

      
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/about.html">About Me</a>
            </li>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <li class="sidebar-nav-item"><a href="/blog/archives/">Archives</a></li>
      <li class="sidebar-nav-item"><a href="https://github.com/beerlington">GitHub</a></li>
      <li class="sidebar-nav-item"><a href="https://twitter.com/beerlington">Twitter</a></li>
    </ul>

    <p>&copy; 2014. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2013/04/06/building-a-strong-foundation-for-vermonts-technology-future/">
        Building a strong foundation for Vermont's technology future
      </a>
    </h1>

    <span class="post-date">06 Apr 2013</span>

    <p>I went to a <a href="http://www.vermonttechnologyalliance.org/events/event_details.asp?id=308176&amp;group=">VTTA Lunch and Learn</a>
meeting last week focused on “Marketing Vermont as a technology state”.
I’ve had some time to reflect on this objective and wanted to talk about some of the frustrations I’ve felt in
trying to address this very issue.</p>

<p>During the lunch session, David Parker of Dealer.com described how Vermont’s
greatest opportunity to grow our economy is through the technology sector.
Vermont’s tourism revenue accounts for a small minority of its GDP, yet our
state’s marketing is disproportionately focused on tourism.
<a href="http://www.youtube.com/watch?v=o4yr58Xga2A">In his presentation</a>,
Parker expressed that we need to get better at educating
people in science and technology, finding startup capital, and retaining a young
energetic workforce. Instead of proposing concrete actions though, he suggests
“changing the rhetoric” by talking about what Vermont has to offer. While I
agree with his message, unfortunately talk is cheap and ideas are free, and
neither is worth shit unless you actually stand up and do something.</p>

<p>Unfortunately, getting the word out about these great jobs and companies is not
enough to attract people to our state. One individual at the meeting went as
far as suggesting that every ad in Vermont Life magazine should feature a
cellphone or laptop. Are you kidding me? Vermont is a beautiful place, let’s
not change that. Can there not be a balance between technology and Vermont’s
simple beauty without the two interfering with the other?</p>

<p>One topic that was missing from the lunch discussion was the role that community
plays in this endeavour. Yes, technology jobs and businesses are undeniably
important, but community is what gives people a sense of belonging. Do artists
and musicians live here because Vermont has one of the <a href="http://www.bls.gov/web/laus/laumstrk.htm">lowest unemployment rates in the country</a>?
No, they live here because there is a community that
supports them. The role of community in the technology sector is no different.</p>

<h2 id="community-is-an-investment-not-an-overnight-success">Community is an Investment, Not an Overnight Success</h2>

<p>Many Americans prefer band-aids to solve problems and don’t consider future
repercussions of today’s decisions. Why should we invest in renewable energy
when we can solve our immediate energy needs with fossil fuels? Why should we
pay higher taxes when corporations can sponsor our highways? Vermonters are
different. We don’t want billboards taking away from Vermont’s beauty. We would
rather pay $15 for a hamburger made from locally raised cows than $4 for a
Big Mac. More importantly though, our small communities thrive because they’re not
looking for short term payoff. Community, like renewable energy, is a long
term investment and not a band-aid.</p>

<p>I’m organizing a software developer conference this summer called the
<a href="http://burlingtonruby.com/">Burlington Ruby Conference</a>.
Last year was our first time hosting the event and it attracted
80 developers for a weekend of networking and education in Burlington. Only about
25% of the attendees were from Vermont. The rest were from Boston, Montreal,
New York, and other parts of New England. We even had two guys from Denmark and
one from Mississippi. We also had a small number of women attend, but this year we have
been putting a lot of energy into increasing that number. We reached out to the
female developer and speaker communities, published a <a href="http://burlingtonruby.com/diversity.html">diversity statement</a> and
<a href="http://burlingtonruby.com/conduct.html">code of conduct</a>, and have teamed up with
<a href="http://www.girldevelopit.com/chapters/burlington">Girl Develop It</a> to offer low cost
training in conjunction with the conference. What other technology event in
Vermont can make similar claims?</p>

<p>This year we’ve reached out to numerous Vermont companies soliciting sponsorship
for the conference and have been met with the same response each time. “Sorry,
not interested. We don’t do Ruby, we do _____”. Fill in the blank with
Java, .Net, LOLCODE, whatever. That’s great, but these companies are obviously
missing the point. When was the last time there was a Java or .Net conference of this caliber in Vermont?
This is an opportunity to support the very community that these
companies are trying to hire from. Just because a developer writes Java code
to pay the bills, doesn’t necessarily mean he or she wants to do this in their
free time. If you look at the
<a href="http://burlingtonruby.org/buruco2012/">speakers we had last year</a>, it clearly wasn’t all
about Ruby. We had talks on building location based apps, database scaling,
and multiple JavaScript talks from some of the most respected people in these fields.</p>

<p>Why have a Ruby conference then you ask? Simple. The Ruby community as a whole
represents the type of community that we know will thrive in Vermont. The people
are passionate, helpful, and strong advocates for diversity. Ruby developers
also tend to be at the forefront of best practices. Combined, these characteristics
lead to a vibrant, successful community. Just look at the number of other
<a href="http://lanyrd.com/topics/ruby/">regional Ruby conferences</a> that have sprung
up in the last few years. Ruby may not be the
<a href="http://www.codinghorror.com/blog/2013/03/why-ruby.html">cool language anymore</a>,
but the community is thriving. In my years of being a
Ruby developer, I’ve never met someone who said they only use Ruby because it
pays the bills.</p>

<p>This conference is going to happen whether we have local support or not. We are
fortunate to live in a city where our costs to organize the event will be covered
by ticket sales alone. We’ve also added a crowd-sourced fundraising effort
called “<a href="http://burlingtonruby.com/cat.html">Burlington Ruby Cats</a>”
that is not only raising money for the conference,
but also for the Humane Society of Chittenden County. Having sponsors would allow
us to do things above and beyond what a typical conference can offer such as
scholarships for students and underrepresented groups like women and minorities.
Equally as important though, having support from local sponsors shows that these
companies actually care about our community. We are not organizing this
conference to make money, infact we will be lucky if we break even given
everything we want to do. We are hosting a lakeside BBQ and providing professional
recordings of the talks free of charge. We are organizing the conference because
we want to invest in our community. We want people to think about this conference
when they think of Burlington, Vermont; thereby helping to achieve our goal of
“Marketing Vermont as a technology state”.</p>

<h2 id="how-can-i-get-involved">How can I get involved?</h2>

<p>Don’t get me wrong, the Vermont software community as it stands today is awesome.
I participated in (<a href="http://beerlington.github.io/blog/2012/10/21/how-we-won-hackvt/">and won</a>)
the 2nd annual Vermont Hackathon last October. This
event was targeted toward Vermont developers and the amount of support that local
businesses gave was incredible. This was a great success for our community,
but we can’t limit ourselves to a handful of these events a year, or only focus
on the business side of Vermont’s technology economy.</p>

<p>I also help organize a number of different software related user groups in the
Burlington area. Our first group, the <a href="http://www.btvwag.org/">Burlington Web Application Group</a>
(BTVWAG) typically has 30-50 people at any given meetup, and our latest group,
<a href="http://burlingtonjs.org/">Burlington JS</a>, filled all 35 of its slots in the first day it was announced.
These groups are run by volunteers and represent exactly what our technology
community is about.</p>

<p>People ask me after every meetup how they can get involved, but then I never hear
back from them. Step up folks! Acknowledging that we have a problem is the first
step, but taking action is the only way that things will change. There are a
number of community members who get this and have devoted countless hours of their free
time to building the community. Aside from the hackathon,
<a href="http://vtcodecamp.org/">Vermont Code Camp</a>, <a href="http://www.techjamvt.com/">Vermont Tech Jam</a>,
and <a href="http://btvgig.org/">BTVGig</a> are other examples of events and initiatives led by
passionate Vermonters who want to see our community grow. We also have folks
like Jen Mincar at <a href="http://www.officesquaredvt.com/">Office Squared</a> who provide
places for these groups to gather, free of charge.</p>

<p>Vermont has jobs and an incredible opportunity for growth through technology,
so now is the time to start investing in our community, and investing in our
future. Please <a href="https://twitter.com/beerlington">reach out</a> if you want to
join us in building a strong foundation for Vermont’s technology future.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2013/03/10/a-simplified-query-interface-for-relationships-in-activerecord-4/">
        A Simplified Query Interface for Relationships in Active Record 4
      </a>
    </h1>

    <span class="post-date">10 Mar 2013</span>

    <p>```ruby
# Rails 4 now lets you simplify “belongs_to” association queries:</p>

<h1 id="before">Before</h1>
<p>Post.where(author_id: @author)
Image.where(imageable_id: @cat, imageable_type: ‘Cat’)</p>

<h1 id="after">After</h1>
<p>Post.where(author: @author)
Image.where(imageable: @cat)
```</p>

<p>About six months ago I added a <a href="https://github.com/rails/rails/pull/7273">new feature to Active Record</a>
that allows you to write simpler queries across associated models. Compared to many of
the other <a href="http://edgeguides.rubyonrails.org/4_0_release_notes.html">new features in Rails 4</a>,
this isn’t a significant change, however I think it’s pretty
handy so I wanted to talk about it and show some examples. Other than a
<a href="http://contributors.rubyonrails.org/contributors/pete-brown/commits">few small bug fixes</a>,
this was my first real contribution to Rails, and the experience was enlightening
(saving that for another post).</p>

<h2 id="its-all-about-the-interface">It’s All About the Interface</h2>

<p>Prior to this change, any queries that used a foreign key column were required
to specify the actual column name as the hash key in the query. The biggest
problem I had with this approach is that it wasn’t consistent with other
Active Record APIs. When I’m working with models, I tend to be thinking in
terms of relationships and objects as opposed to database columns.</p>

<p>Take the following example from Rails 3.x where you can build new
objects using the <code>belongs_to</code> relationship, but you cannot query with this
relationship. When you are querying, you need to shift into an object + database
hybrid mindset:</p>

<p>```ruby
class Post &lt; ActiveRecord::Base
  belongs_to :author
end</p>

<h1 id="creating-related-objects-using-the-model-association">Creating related objects using the model association:</h1>
<p>Post.new(author: Author.first)</p>

<h1 id="does-not-work-in-rails-3x">Does NOT work in Rails 3.x</h1>
<p>Post.where(author: Author.first) # =&gt; NOPE!</p>

<h1 id="must-specify-foreign-key-to-make-query-work-in-rails-3x">Must specify foreign key to make query work in Rails 3.x</h1>
<p>Post.where(author_id: Author.first) # =&gt; Yup!
```</p>

<p>In the above example, I am specifying the foreign key on one side, and the object on the other.
I think it can be hard to remember when you can use the associations and when
you can’t. Obviously a more practical approach would be to use <code>Author.first.posts</code>,
but this gives flexibility in cases where you might not have both sides of the
relationship fully setup.</p>

<p>The above example may seem trivial so here’s an example using a
non-conventional relationship:</p>

<p>```ruby
class Post &lt; ActiveRecord::Base
  belongs_to :writer, class_name: ‘Author’, foreign_key: ‘author_id’
end</p>

<h1 id="ah-crap-i-forgot-what-my-foreign-key-was-called">Ah crap… I forgot what my foreign key was called!</h1>
<p>Post.where(writer_id: Author.first) # =&gt; NOPE!</p>

<h1 id="must-still-specify-foreign-key-column-here">Must still specify foreign key column here</h1>
<p>Post.where(author_id: Author.first) # =&gt; Yup!
```</p>

<p>This issue becomes even more apparent when working with polymorphic relationships:</p>

<p>```ruby
class Cat &lt; ActiveRecord::Base
  has_many :images, as: :imageable, dependent: :destroy
end</p>

<p>class Image &lt; ActiveRecord::Base
  belongs_to :imageable, polymorphic: true
end</p>

<p>Image.where(imageable_id: Cat.first, imageable_type: ‘Cat’)
```</p>

<h2 id="striving-for-consistency">Striving for Consistency</h2>

<p>After seeing a few <a href="https://github.com/rails/rails/issues/1736">different</a>
<a href="https://github.com/rails/rails/issues/5067">issues</a> get opened, I realized
I wasn’t the only one who felt this inconsistency was unintuitive. It was
causing enough confusion that people were reporting it as a bug,
convinced that it “used to work”.  This clearly wasn’t a bug, and at some
point an unintuitive interface needs to be addressed.</p>

<p>I hadn’t spend a ton of time in the Active Record internals so I decided
to dive in and see if I could change the API so it worked with the relationship
name. I knew that each Active Record model tracks its relationships with other
models using “reflections”. Each reflection stores various properies such as the
relationship name and macro (ie belongs_to, has_many, etc).</p>

<p><code>irb
1.9.3-p327 :007 &gt; Author.reflections
 =&gt; {:posts=&gt;#&lt;ActiveRecord::Reflection::AssociationReflection:0x007f8cf391dc28 @macro=:has_many, @name=:posts, @options={:extend=&gt;[]}, @active_record=Author(id: integer, name: string, created_at: datetime, updated_at: datetime), @plural_name="posts", @collection=true&gt;}
1.9.3-p327 :008 &gt; Post.reflections
 =&gt; {:author=&gt;#&lt;ActiveRecord::Reflection::AssociationReflection:0x007f8cf4c1afb0 @macro=:belongs_to, @name=:author, @options={}, @active_record=Post(id: integer, body: text, author_id: integer, created_at: datetime, updated_at: datetime), @plural_name="authors", @collection=false&gt;}
</code></p>

<p>As I dove further into the Active Record internals, I found the
<a href="https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/predicate_builder.rb">ActiveRecord::PredicateBuilder</a>
which is used for building the “WHERE” clause of every Active Record
query. It was not the most straightforward class I’ve worked with, but
the integration tests were good so I could do some exploratory testing
and know when I had broken something. After a few days of discussing
with the Rails core team about what behavior should be implemented, I
had some <a href="https://github.com/rails/rails/commit/3da275c4396d7fad250d2b786027ba4f14344bd4">working code</a>.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In the end, the changes I made to the predicate builder allow you to query across a
belong_to relationship without specifying the foreign key. Does it
enable you to do something you couldn’t do before? Not really, however, bringing
more consistency to the API was my main goal.</p>

<p>Now that <a href="http://weblog.rubyonrails.org/2013/2/25/Rails-4-0-beta1/">Rails 4 beta has been released</a>
I encourage people to download it today and try out some simple examples:</p>

<p><code>ruby
Post.where(author: @author)
Image.where(imageable: @cat) # =&gt; Polymorphic!
</code></p>

<p>I also recommend checking out the <a href="https://github.com/rails/rails/blob/master/activerecord/test/cases/relation/where_test.rb#L26-L81">Active Record tests</a>
for some more complex examples of how it can be used with polymorphic
relationships and single-table inheritance.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2012/11/10/reading-books-is-fun/">
        Reading Books is Fun
      </a>
    </h1>

    <span class="post-date">10 Nov 2012</span>

    <p>I picked up a <a href="http://www.amazon.com/Kindle-Paperwhite-Touch-light/dp/B007OZNZG0">Kindle Paperwhite</a> a few weeks ago to replace the one I “borrowed” from my wife. It has turned out to be a fantastic piece of hardware, and I agree with pretty much everything <a href="http://daringfireball.net/2012/10/kindle_paperwhite">John Gruber has said about it</a>. I’ve never considered myself much of a reader, but I’ve made it through some great (and not so great) books over the last couple months, and wanted to share a my thoughts on them.</p>

<h2 id="im-currently-reading">I’m Currently Reading:</h2>

<h3 id="confident-rubyhttpdevblogavdiorg20120605confident-ruby-beta"><a href="http://devblog.avdi.org/2012/06/05/confident-ruby-beta/">Confident Ruby</a></h3>

<p>If this book was actually finished, I would be done with it. It is currently in alpha and only about 80 pages, but the content so far is outstanding. What I enjoy about Avdi Grimm’s writing is that he can take subjects like <a href="http://exceptionalruby.com/">exception handling</a> and <a href="http://objectsonrails.com/">objects</a> and describe them in a way you wouldn’t think possible. After taking some time off from writing Confident Ruby to focus on his <a href="http://devblog.avdi.org/rubytapas/">RubyTapas</a> screencast series, Avdi finally sent out another update this morning.  It’s a great book for anyone who has been working with Ruby for a while and feels like they’ve mastered the basics.</p>

<h3 id="the-passionate-programmerhttppragprogcombookcfcar2the-passionate-programmer"><a href="http://pragprog.com/book/cfcar2/the-passionate-programmer">The Passionate Programmer</a></h3>

<div style="float:left; margin-right: 20px"><img src="/images/books/passionate-programmer.jpg" /></div>

<p>We’ve all been shit on by managers and coworkers at one point or another. Chad Fowler has been through it all too, but instead of just complaining, he wrote a book about what he learned. According to my Kindle, I’m only about 55% done, but I’m really enjoying it so far. The short, targeted chapters make it easy to pick up and read when you only have a couple minutes to spare. I would recommend this book for anyone who thinks they know everything and that managers are always wrong.</p>

<h2 id="recent-readings">Recent readings:</h2>

<h3 id="javascript-the-good-partshttpshoporeillycomproduct9780596517748do"><a href="http://shop.oreilly.com/product/9780596517748.do">JavaScript: The Good Parts</a></h3>

<div style="float:left; margin-right: 20px"><img src="/images/books/js-the-good-parts.gif" /></div>

<p>If you’ve been a developer for a while but never really taken the time to properly learn JavaScript, start with this book. It will give you a new appreciation for the language and leave you longing for more. The funny thing about this book is that it’s only 176 pages (compared to the Definitive Guide’s 1,100), and a large portion is spent discussing the parts of JavaScript you should avoid or be cautious of. Since reading it, I’ve been watching some of <a href="http://pluralsight.com/training/Courses#javascript">Pluralsight’s JavaScript courses</a> and I feel like it gave me a solid foundation for learning more.</p>

<h3 id="practical-object-oriented-design-in-rubyhttpwwwamazoncomdp0321721330"><a href="http://www.amazon.com/dp/0321721330">Practical Object Oriented Design in Ruby</a></h3>

<div style="float:left; margin-right: 20px"><img src="/images/books/ood.jpg" /></div>

<p>Not only is this one of the best Ruby books I’ve ever read, it’s also one of the best programming books period. <a href="https://twitter.com/sandimetz">Sandi Metz</a> is a master of analogies, and the way she explains the principals of object oriented design has me convinced I could learn anything from her. I committed to giving a presentation on <a href="http://burlingtonruby.org/2012/08/30/intro-to-ruby-oop-intro-to-active-admin.html">Object Oriented Programming in Ruby</a> back in September and had been working on it for a few solid weeks. This book came out about a week before my presentation, I read it in three days, and decided to completely scrap my presentation and start over. This book is perfect for Ruby developers who want to learn more about object oriented design, but do it in a language that is familiar to them.</p>

<h3 id="service-oriented-design-with-ruby-and-railshttpwwwamazoncomservice-oriented-design-addison-wesley-professional-seriesdp0321659368"><a href="http://www.amazon.com/Service-Oriented-Design-Addison-Wesley-Professional-Series/dp/0321659368">Service Oriented Design with Ruby and Rails</a></h3>

<div style="float:left; margin-right: 20px"><img src="/images/books/sodrr.jpg" /></div>

<p>I picked this one up after receiving a <a href="http://stackoverflow.com/questions/10065022/ruby-on-rails-soa-design-resources-and-examples/10468079#10468079">fantastic reply</a> to a question I posted on Stack Overflow regarding Rails SOA resources. While slightly outdated by the time I read it, it has actually aged fairly well compared to other technology-specific software books. The book provides a thorough overview for people who’ve never built or consumed web services in Ruby, and a great refresher for experienced developers who have. For anyone who has read it, I’d recommend listening to a recent <a href="http://rubyrogues.com/076-rr-service-oriented-design-with-paul-dix/">Ruby Rogues podcast</a> featuring author Paul Dix. They discuss some of the changes in technology and practices since its release, and Paul reflects on how we would write it today if given the opportunity.</p>

<h3 id="shipping-greatnesshttpwwwshippinggreatnesscom"><a href="http://www.shippinggreatness.com/">Shipping Greatness</a></h3>

<div style="float:left; margin-right: 20px"><img src="/images/books/shipping.gif" /></div>

<p>This book was a big departure from other tech books I’ve read in that it was written specifically for managers and not software developers. I feel like I was getting management “insider information” while reading it, and definitely have a new appreciation for the work done by non-coders. Written from the perspective of a former product leader at Google and Amazon, it was perhaps too “enterprisey” for some folks, but as someone who has worked in startups my whole career, it was fascinating to read how large companies build and ship products. Other than a couple sections I skipped such as “Understand How to Communicate with Designers”, this was a very enjoyable read.</p>

<h3 id="confessions-of-a-public-speakerhttpshoporeillycomproduct9780596802004do"><a href="http://shop.oreilly.com/product/9780596802004.do">Confessions of a Public Speaker</a></h3>

<div style="float:left; margin-right: 20px"><img src="/images/books/confessions.gif" /></div>

<p>Another departure from the coding genre, Confessions offers a glimpse into the life of a professional public speaker. I was certainly not expecting to become a better public speaker from simply reading this book, but was interested in hearing about someone else’s experiences on the subject. I’d recommend it for anyone who has done any amount of public speaking regardless of whether you want to do more or absolutely hated the experience. Communication, whether it’s public speaking or otherwise, is an important skill that very few software developers take time to learn.</p>

<h3 id="domain-specific-languageshttpmartinfowlercombooksdslhtml"><a href="http://martinfowler.com/books/dsl.html">Domain Specific Languages</a></h3>

<div style="float:left; margin-right: 20px"><img src="/images/books/dsl.jpg" /></div>

<p>I did not enjoy this book at all, infact, I didn’t even finish reading it. It is pretty much the exact opposite of Practical Object Oriented Design in terms of readability. It is too lengthy and far too comprehensive for my taste. Unless you’re planning on creating the next <a href="http://cukes.info/">Cucumber</a> or you’re writing your thesis on DSLs, save yourself some time and read something else. The only reason I picked it up was because I was interested in building internal DSLs in Ruby and InformIT had it <a href="http://www.informit.com/deals/">on sale for for $9.99</a>. I might revisit it someday, but I have a fairly long list of books I want to get through, so that’s not likely to happen any time soon.</p>

<h2 id="on-my-reading-list-in-no-particular-order">On my reading list (in no particular order):</h2>

<p>Unfortunately I buy books faster than I read them so here’s a list of those on my immediate reading list (ie they’re already on my Kindle):</p>

<ul>
  <li>The Art of Community: Building the New Age of Participation</li>
  <li>Being Geek: The Software Developer’s Career Handbook</li>
  <li>Team Geek: A Software Developer’s Guide to Working Well With Others</li>
  <li>The dRuby Book: Distributed and Parallel Computing with Ruby</li>
  <li>Distributed Programming with Ruby</li>
  <li>The Connected Company</li>
  <li>Maintainable JavaScript</li>
</ul>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2012/10/21/how-we-won-hackvt/">
        How We Won Hack|VT
      </a>
    </h1>

    <span class="post-date">21 Oct 2012</span>

    <p>This post describes how our team, <strong>Datamorphosis</strong>, won the <a href="http://hackvt.com/">HackVT hackathon</a>, and the strategy we used to ensure that if we didn’t win, we’d at least be proud of what we built. Read on to find out how we formed our team, brainstormed an idea, researched and planned our application, executed during the event, which technologies we used, and how we presented our winning application: <strong>The Vermont Business Landscape</strong>.</p>

<p><img src="http://petebrown-pics.s3.amazonaws.com/public/vermont-business-landscape-datamorphosis.png" alt="Insert App screenshot" /></p>

<h2 id="forming-a-team">Forming a Team</h2>

<p>Hackathons are not just about writing code. They are about solving a problem in the most succinct way possible, and effectively communicating the problem and solution in a remarkably short period of time. Having the right team is critical to accomplishing that goal. There are very few people in this world who alone can brainstorm an idea, aggregate complex data, build APIs, design a usable interface, and present their work in front of a judging audience. The rest of us are mere mortals. Forming a solid team is about understanding the strengths and weaknesses of each member, and how they will fit together.</p>

<h3 id="our-team">Our Team:</h3>

<ul>
  <li><a href="http://adambouchard.info">Adam Bouchard</a></li>
  <li><a href="https://twitter.com/alanpeabody">Alan Peabody</a></li>
  <li><a href="http://katiemccurdy.com/">Katie McCurdy</a></li>
  <li><a href="http://www.linkedin.com/in/patrickberkeley">Patrick Berkeley</a></li>
  <li><a href="https://twitter.com/beerlington">Peter Brown</a> (me!)</li>
</ul>

<p>Combined, our team was highly skilled in web design and development, data analysis, user experience, and communication; precisely the skills needed to succeed in a hackathon. Almost every member of our team had previously worked with another member at some point in the past. We understood each other’s strengths and weaknesses and knew exactly how each person could contribute. This allowed us to trust one another and stay focused on the tasks that we were most qualified for.</p>

<h2 id="brainstorming-and-planning">Brainstorming and Planning</h2>

<p>When selecting our data set, there was one theme that seemed to resonate with our team: <em>Incorporating data that was challenging to aggregate and analyze</em>. The reason for this is that many successful business models are built around simplifying a tedious task. Our team believes in the value of small businesses to Vermont’s economy, and in doing research, we discovered that the state has a need for aggregating business data from disparate data sources. The <a href="http://burlingtonvt.gov/cedo/">Community &amp; Economic Development Office</a> receives frequent inquiries from prospective new business owners as to the health of various sectors throughout Vermont.</p>

<p>Once we had a vague idea that we wanted to build a tool to assist new business owners, we began to research and plan our application. Our team met a few times during the week leading up to the hackathon, and used <a href="https://flowdock.com/">Flowdock</a> to discuss ideas (even when we were in the same room).</p>

<h3 id="here-are-a-few-of-the-areas-that-we-researched">Here are a few of the areas that we researched:</h3>

<ul>
  <li><strong>Market need</strong> - If you’re trying to solve a problem for someone other than yourself, find a real person who has this problem. Talk to them and see how passionate they are about it. In our case, the person we spoke with at the Community &amp; Economic Development Office was ecstatic about our proposed solution. This validated our idea and gave us confidence going into to the competition.</li>
  <li><strong>Judges</strong> - Information about each judge was available on the <a href="http://hackvt.com/#details">HackVT website</a>. We discussed as a team what sort of things they might be looking for, and planned to account for this in our application. For example, <a href="http://cutroni.com/blog/">Justin Cutroni</a> works on the Google Analytics team, and we assumed that analyzing and simplifying complex data was something he is passionate about.</li>
  <li><strong>Technology</strong> - Spending time up front discussing and researching technologies is well worth the effort. After choosing an idea, we made a list of all the potential tools we might need to build it. Members of our team had overlapping skill sets so we were able to make some important decisions before the competition began.</li>
  <li><strong>How to win a hackathon</strong> - We even spent some time researching <a href="http://news.ycombinator.com/item?id=4345295">how other people won hackathons</a>.</li>
</ul>

<h2 id="execution">Execution</h2>

<p>Given the amount of upfront work we did, we were able to start the hackathon with confidence and direction. We knew who was doing what, and essentially hit the ground running. We made a couple mistakes along the way and had to pivot a few times, but overall we were able to stay focused on our goal and finish within the allotted time.</p>

<p><img src="http://petebrown-pics.s3.amazonaws.com/public/datamorphosis-at-work.jpg" alt="Datamorphosis team at work" /></p>

<h3 id="what-we-learned">What we learned:</h3>

<ul>
  <li><strong>Start early</strong> - Though the hackathon didn’t officially kick off until 6PM, they allowed teams to set up and start coding at 3pm. These early hours in the competition are critical. Everyone is awake and can make reasonable decisions, and being there early makes things a little less stressful.</li>
  <li><strong>Avoid perfection</strong> - This is a hackathon, and it’s ok to write hacky code. People who know me or have seen some of <a href="https://speakerdeck.com/beerlington">my presentations</a> know that I’m a stickler for good code. Building a production application for your customers is one thing, but hacking something in 24 hours for a three minute presentation is another. Put aside your pride and just get it done.</li>
  <li><strong>Focus on the core</strong> - Since you will likely run into unexpected hiccups along the way, focus on building the core first and iterate on it. Will your application still function and be presentable without feature X? If so, it’s a low priority. In our case, showing data on a time-lapse map was the core of our application. Without this, it would not have met our goals. We tracked a list of our priorities on a whiteboard and delegated each task in order of importance. By focusing on these must-have features, we were able to have a simple application that was easy to finish and demonstrate. </li>
  <li><strong>Don’t panic</strong> - When we are tired and under stress, we tend to make bad decisions. Our team encountered a serious bug in the final hour and realized we didn’t have time to fix it, so we prepared our presentation accordingly. We spent our last 30 minutes planning a path to walk through the application that we knew we could demonstrate with confidence.</li>
  <li><strong>Know when to cut a feature</strong> - This goes along with focusing on core functionality. Some features will take up too much of your time and don’t add enough value. If it doesn’t feel right, cut your losses and move on. We had a few awesome features that we decided to axe at the last minute. If you’ve prioritized your todo list, the tasks ranked as “nice to have” will likely get pulled. </li>
  <li><strong>Design for presentation</strong> - Chances are, your application is going to look 100x worse on a large, lower contrast projector screen during the presentation. We planned for this by using large, readable fonts and designing simple interface. If the judges can’t make out what it is, it will just be visually distracting.</li>
  <li><strong>Asynchronous communication</strong> - Even when we were sitting at the same table during the event, we continued using Flowdock to communicate. We found this asynchronous form of communication to be vital to our productivity, allowing people to propose ideas, share links, and notify others about code changes, without breaking from their workflow.</li>
  <li><strong>Don’t bother with user authentication</strong> - No one cares that you added a 3rd party authentication system to your app. If your application isn’t secure for the presentation, this is actually a good thing because you won’t be wasting valuable time trying to remember your password.</li>
</ul>

<h2 id="presentation">Presentation</h2>

<p>In planning for the event, we anticipated having at least five minutes to present our idea. It turned out we only had three. Three minutes is not a lot of time for anything, let alone present a problem, solution and walk through a software demo. Every second is valuable and should be spent selling your idea to the judges.</p>

<p><img src="http://petebrown-pics.s3.amazonaws.com/public/presenting-at-hackvt.jpg" alt="presenting at HackVT" /></p>

<h3 id="here-are-some-tips-for-nailing-the-presentation">Here are some tips for nailing the presentation:</h3>

<ul>
  <li><strong>Get some rest</strong> - With a five person team, we had the luxury of making sure the people representing our team were well rested. Only two of my teammates actually coded through the night. It’s easy to make stupid mistakes when you’re tired, and you don’t want to blow all your hard work in the last 3 minutes.</li>
  <li><strong>Practice your pitch</strong> - Our presenters spent hours preparing for the demo. They practiced what they were going to say and how everything was going to flow. This extra effort definitely paid off in the end.</li>
  <li><strong>Don’t talk about the technology</strong> - You’re here to brag about your application, not about the tools you used. If people are interested in what you built it in, they will ask. </li>
  <li><strong>No one built a perfect application</strong> - I’m sure everyone’s application had at least one embarrassing bug. Ours had at least three that we were aware of. Don’t apologize and bring attention to these faults, the judges probably won’t even notice. We planned our demo to avoid these issues, and no one besides us knew they existed.</li>
  <li><strong>Focus on your product</strong> - Don’t rely on presentation slides to help sell your app. Though most of the judges looked well rested, everyone else is tired and just wants to see your application in action.</li>
  <li><strong>Just because you built it, doesn’t mean you have to show it</strong> - There were quite a few features we developed that did not even get mentioned during our demo. They would have been great to show off if we had a few more minutes, but they were not polished and did not really add core value.</li>
</ul>

<h2 id="technologies-used">Technologies Used</h2>

<ul>
  <li><a href="https://flowdock.com/">Flowdock</a></li>
  <li><a href="https://github.com/">Github</a></li>
  <li><a href="http://rubyonrails.org/">Ruby on Rails</a></li>
  <li><a href="https://github.com/OpenRefine/OpenRefine">OpenRefine</a> (formerly Google Refine)</li>
  <li><a href="http://backbonejs.org/">Backbone.js</a></li>
  <li><a href="http://jquery.com/">jQuery</a></li>
  <li><a href="http://leaflet.cloudmade.com/">LeafLet</a></li>
  <li><a href="http://ivaynberg.github.com/select2/">Select2</a></li>
  <li><a href="http://activeadmin.info/">ActiveAdmin</a></li>
  <li><a href="http://www.postgresql.org/">PostgreSQL</a> and <a href="http://postgresapp.com/">Postgres.app</a></li>
  <li><a href="http://www.rubygeocoder.com/">Geocoder</a> (Ruby gem)</li>
</ul>

<h2 id="final-thoughts">Final Thoughts</h2>

<p>Winning the hackathon means so much more to our team than the cash or prizes. HackVT was by far the most well organized Vermont event I have ever attended. Every last detail, from the quality of food to the mounted, decorative data sets, made the developers feel welcome and comfortable during our 24 hour stay. This event demonstrated the level of commitment that companies like MyWebGrocer and Dealer.com have made to Vermont, ensuring our state becomes a sustainable technology hub and attract talented individuals for years to come. Thank you to all the volunteers, sponsors, and participants who made it happen. See you again in 2013!</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2011/07/25/building-a-csv-renderer-in-rails-3/">
        Building a Custom CSV Renderer in Rails 3
      </a>
    </h1>

    <span class="post-date">25 Jul 2011</span>

    <p>This post will walk you through creating a simple renderer in Rails
3.</p>

<h2 id="what-are-renderers">What are renderers?</h2>

<p>A renderer in Rails is a way of customizing how content is rendered for
the browser or any client interacting with your web service. Rails has
a handful of built in rendering formats such as <em>html</em>, <em>xml</em>, and
<em>json</em>, and exposes an effortless method for adding additional custom rendering
functionality that can be shared among your controllers and
applications.</p>

<p>Custom renderers provide a standard, reusable interface for rendering content,
in turn allowing you to DRY up your application logic architecture.
This post will show you how to add a custom renderer that converts
ActiveRecord collections to a downloadable CSV format.</p>

<p>Below is an example of how the final CSV renderer will be used:</p>

<p><em>app/locations_controller.rb</em></p>

<p>```ruby
class LocationsController &lt; ApplicationController
  def index
    @locations = Location.all</p>

<pre><code>respond_to do |format|
  format.html
  format.csv  { render :csv =&gt; @locations, :except =&gt; [:id] }
end   end end ```
</code></pre>

<h2 id="some-background-info">Some background info:</h2>

<p>Before getting started with our CSV renderer, let’s look at the
<a href="https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/renderers.rb">Rails source</a>
to see how it defines its own custom renderers:</p>

<p><em>actionpack/lib/action_controller/metal/renderers.rb</em></p>

<p>```ruby
module ActionController
  def self.add_renderer(key, &amp;block)
    Renderers.add(key, &amp;block)
  end</p>

<p>module Renderers
    # Lots of ommitted code…</p>

<pre><code>def self.add(key, &amp;block)
  define_method("_render_option_#{key}", &amp;block)
  RENDERERS[key] = block
end

# More ommitted code...

add :xml do |xml, options|
  self.content_type ||= Mime::XML
  xml.respond_to?(:to_xml) ? xml.to_xml(options) : xml
end   end end ```
</code></pre>

<p>At the top you see an <em>add_renderer</em> method, which will be our
interface to add a custom renderer. Ignoring the fact that
I’ve removed some of the implementation details,
further down you see a class method called <em>add</em> which does two things:
1) It defines an internal method used by the rendering stack,
and 2) stores the key (:xml, :json, etc) in a hash.</p>

<p>As we move to the bottom of this file, you’ll see where <em>add</em> is being used
to define an XML renderer. This method takes a block with two arguments.
The first argument is an object that responds to <em>to_xml</em>, and the second
is a set of options that are passed as arguments to <em>to_xml</em>. If for some reason
the object doesn’t respond to <em>to_xml</em> then it simply returns itself.</p>

<p>If you’ve ever used the Rails scaffold generator, you will notice that
it includes code for responding to XML requests:</p>

<p><em>default scaffolded controller.rb</em></p>

<p>```ruby
def show
  @location = Location.find(params[:id])</p>

<p>respond_to do |format|
    format.html # show.html.erb
    format.xml  { render :xml =&gt; @location }
  end
end
```</p>

<p>This is exacly what adding the XML renderer has provided, a clean syntax
for allowing the server to respond with XML formatted data.</p>

<h2 id="why-should-i-use-it">Why should I use it?</h2>

<p>Let’s say you have a <em>Location</em> model with the
following schema:</p>

<p><em>db/schema.rb</em></p>

<p><code>ruby
ActiveRecord::Schema.define(:version =&gt; 20110726022558) do
  create_table "locations", :force =&gt; true do |t|
    t.string   "name"
    t.string   "address"
    t.string   "city"
    t.string   "state"
    t.string   "zip"
    t.datetime "created_at"
    t.datetime "updated_at"
  end
end
</code></p>

<p>Although your main application may use all of these fields, you might need to
import this data into some sort of enterprise/exchange-powered legacy
system in CSV format. You could easily define a <em>to_csv</em> class method on your
Location model and just call that from the controller, but that presents
a few problems. The Location model shouldn’t know anything
about converting itself to a CSV format because this violates the rule that
components should have a single, well-defined purpose. Also, what if you want to
download other models in CSV format? These are problems that respond_to and render
aim to solve.</p>

<h2 id="how-does-it-work">How does it work?</h2>

<p>Looking back to the first code snippet I posted, you can see that the
CSV render syntax in my controller is very similar to the XML render syntax. The only difference is
that our CSV format allows you to specify which columns (attributes) you
want to include or exclude in the downloaded CSV file. This detail has
almost nothing to do with the renderer itself, and is implemented by
the object’s Array class, as shown below.</p>

<p>To understand how this works, let’s look at our custom CSV renderer:</p>

<p><em>csv_renderer.rb</em></p>

<p>```ruby
require ‘action_controller/metal/renderers’</p>

<p>ActionController.add_renderer :csv do |csv, options|
  self.response_body = csv.respond_to?(:to_csv) ? csv.to_csv(options) : csv
end
```</p>

<p>You will notice a few differences between our custom renderer
and the XML renderer defined by Rails. First, we are using
<em>add_renderer</em> as opposed to just <em>add</em>. This is a personal preference
as you can also use: <code>ActionController::Renderers.add
:csv</code>. Both methods accomplish exactly the same thing, but I find
<em>add_renderer</em> to be slightly more readable.
Second, we are not setting the content_type. The
reason for this is because Rails automatically adds a CSV Mime Type
within the action_pack library. I’m not going to go into the details of how that
works, but feel free to <a href="https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/http/mime_types.rb">explore the complete list of Mime Types</a>.
The last detail to note is that we are requiring
<em>action_controller/metal/renderers</em> which provides us access to the <em>add_renderer</em>
method. You could alternatively require any module that inclues this
file, such as <em>action_controller/base</em> if you need access to methods like
<a href="http://api.rubyonrails.org/classes/ActionController/Streaming.html#method-i-send_data">send_data</a>.</p>

<p>Finally, let’s look at the <em>to_csv</em> Array method. The
reason this method is defined on Array is because ActiveRecord converts
collection queries such as <code>Location.where(:state =&gt; 'vt')</code> or <code>Location.all</code>
to arrays.</p>

<p><em>array.rb</em></p>

<p>```ruby
class Array</p>

<p># Converts an array to CSV formatted string
  # Options include:
  # :only =&gt; [:col1, :col2] # Specify which columns to include
  # :except =&gt; [:col1, :col2] # Specify which columns to exclude
  # :add_methods =&gt; [:method1, :method2] # Include addtional methods that aren’t columns
  def to_csv(options={})
    return ‘’ if empty?
    return join(‘,’) unless first.class.respond_to? :column_names</p>

<pre><code>columns = first.class.column_names
columns &amp;= options[:only].map(&amp;:to_s) if options[:only]
columns -= options[:except].map(&amp;:to_s) if options[:except]
columns += options[:add_methods].map(&amp;:to_s) if options[:add_methods]

csv = [columns.join(',')]
csv.concat(map {|v| columns.map {|c| v.send(c) }.join(',') })

csv.join("\n")   end end ```
</code></pre>

<p>Above we can see that <em>to_csv</em> takes a hash of options which are used to
determine which columns should be included in the CSV file. One
option <code>:only =&gt; [:col1, :col2]</code> allows you to specify the exact
columns you want included, another option, <code>:except =&gt; [:col1, :col2]</code>, 
allows you to specify which columns you DO NOT want to include, and the
last option, <code>:add_methods =&gt; [:method1, :method2]</code> allows you to add
data defined in methods that aren’t saved in the database. Calling
<em>to_csv</em> without any arguments will include all columns.</p>

<h2 id="usage-examples">Usage examples:</h2>

<p>Tying that all together, we can now use this renderer in our controllers
to let users or clients download CSV data. Here are a few examples:</p>

<h3 id="generate-a-csv-that-includes-every-column">Generate a CSV that includes every column:</h3>

<p><em>app/controllers/location_controller.rb</em></p>

<p>```ruby
class LocationsController &lt; ApplicationController
  def index
    @locations = Location.all</p>

<pre><code>respond_to do |format|
  format.csv  { render :csv =&gt; @locations }
end   end end ```
</code></pre>

<h3 id="generate-a-csv-that-includes-every-column-except-the-id">Generate a CSV that includes every column except the id:</h3>

<p><em>app/controllers/location_controller.rb</em></p>

<p>```ruby
class LocationsController &lt; ApplicationController
  def index
    @locations = Location.all</p>

<pre><code>respond_to do |format|
  format.csv  { render :csv =&gt; @locations, :except =&gt; [:id] }
end   end end ```
</code></pre>

<h3 id="generate-a-csv-that-includes-only-the-state-and-zipcode">Generate a CSV that includes only the state and zipcode:</h3>

<p><em>app/controllers/location_controller.rb</em></p>

<p>```ruby
class LocationsController &lt; ApplicationController
  def index
    @locations = Location.all</p>

<pre><code>respond_to do |format|
  format.csv  { render :csv =&gt; @locations, :only =&gt; [:state, :zip] }
end   end end ```
</code></pre>

<h3 id="generate-a-csv-that-adds-a-model-method">Generate a CSV that adds a model method:</h3>

<p><em>app/controllers/location_controller.rb</em></p>

<p>```ruby
class LocationsController &lt; ApplicationController
  def index
    @locations = Location.all</p>

<pre><code>respond_to do |format|
  format.csv  { render :csv =&gt; @locations, :add_methods =&gt; [:my_method] }
end   end end ```
</code></pre>

<h2 id="finishing-up">Finishing up</h2>

<p>This post walked you through a simple yet practical approach to building
a custom Rails renderer in Rails 3. While it may be overkill for one-off
uses in a small code base, it shows it’s true potential in large
applications by helping prevent redundant code, and for building APIs that may need to
respond to formats other than JSON and XML.</p>

<h2 id="additional-resources">Additional Resources</h2>
<p>All the code used in this post was developed for a RubyGem called <a href="https://github.com/beerlington/render_csv">render_csv</a>.
For more information about renderers and the Rails rendering stack, I highly recommend
<a href="http://pragprog.com/book/jvrails/crafting-rails-applications">Crafting Rails Applications</a>
 by <a href="https://twitter.com/josevalim">José Valim</a>. Also, the <a href="http://guides.rubyonrails.org/layouts_and_rendering.html">Layouts and Rendering Rails Guide</a>
provides a comprehensive overview of rendering in controllers as well as
views.</p>


  </div>
  
</div>

<div class="pagination">
  
    <span class="pagination-item older">Older</span>
  
  
    
      <a class="pagination-item newer" href="/">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
